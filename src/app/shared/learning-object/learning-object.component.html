<div class="learning-object" id="learning-object" [ngClass]="!error ? learningObject.length : 'error'" [routerLink]="['/details', learningObject.author.username, learningObject.name]">
  <ng-container *ngIf="!error; else errorTemplate">
    <div class="image">
      <div *ngIf="!loading" class="collection">
        <div>
          {{ collections.get(learningObject.collection) }}
        </div>
      </div>
      <div class="initials">{{ learningObject.length.toUpperCase() }}</div>
    </div>
    <div class="learning-object-content">
      <div class="title">
        {{ truncateText(learningObject.name, 45) }}
        <button *ngIf="!loading && (auth.isLoggedIn | async) && canDownload" class="download-btn" (click)="download($event)"><i class="fas fa-download"></i></button>      
      </div>
      <div class="details">
        <div class="author">
          {{ learningObject.author.name | titlecase }} | {{ learningObject.author.organization }}
        </div>
        <div class="date">
          Updated {{ date | date:'mediumDate' }}
        </div>
      </div>
      <div class="goals" *ngIf="this.learningObject.goals[0]?.text" [innerHtml]="goals()"></div>
    </div>
  </ng-container>
</div>

<clark-popup *ngIf="showDownloadModal" (closed)="toggleDownloadModal(false)">
  <div style="max-width: 600px;" #popupInner>
    <div class="modal-title">Notice about large files!</div>
    <div class='modal-text'>
      To keep download times short files over 100 megabytes are not included in the download package. You can find links to download them inside the 'ReadMe' PDF.
    </div>
    <div class="btn-group center">
      <button class="button good" (click)="toggleDownloadModal(false)">Ok, got it!</button>
    </div>
  </div>
</clark-popup>

<ng-template #errorTemplate>
  <div class="image">
    <div class="initials">
      <i class="fas fa-exclamation-triangle"></i>
    </div>
  </div>
  <div class="learning-object-content">
    {{ error }}
  </div>
</ng-template>