<div class="container">
  <div class="browse-columns">
    <div class="sidebar-wrapper">
      <div class="column-title">
        Filters
        <div class="filters-clear-all" (click)="clearAllFilters()">Clear all filters</div>
      </div>
      <clark-filter [display]="'vertical'" [filters]="filters" (add)="addFilter($event.category, $event.filter)" (remove)="removeFilter($event.category, $event.filter)">
        <!-- <ng-template><clark-mappings-filter (add)="addFilter($event.category, $event.filter)"></clark-mappings-filter></ng-template> -->
      </clark-filter>
    </div>
    <div class="content">
      <div class="column-title">
        <span>Results {{this.learningObjectService.totalLearningObjects ? '(' + this.learningObjectService.totalLearningObjects + ')' : ''}} <span class="loading" *ngIf="loading"><i class="far fa-spinner-third fa-spin"></i></span> </span>
        <div class="sort" (click)="showSortMenu($event)">
          <div *ngIf="query.orderBy" class="removeSort" (click)="clearSort($event);" tip="Clear sorting criteria" tipLocation="above">
            <i class="far fa-times"></i>
          </div>
          <span>{{ (query.orderBy) ? sortString : 'Sort'}}</span><i class="far fa-chevron-down"></i>
        </div>
      </div>
      <h3 *ngIf="!learningObjects || learningObjects.length==0">No Results</h3>
      <learning-object-component *ngFor="let l of learningObjects" [learningObject]="l" [loading]="loading"></learning-object-component>
    </div>
  </div>
  <div *ngIf="learningObjects.length" class="paginationCtrl">
    <ul>
      <li (click)="prevPage()" [ngClass]="{'gone': query.currPage <= 1}"><i class="far fa-chevron-left"></i></li>
      <li *ngFor="let p of pages" [ngClass]="{'active': query.currPage == p}" (click)="goToPage(p)">{{ p }}</li>
      <li (click)="nextPage()" [ngClass]="{'gone': query.currPage >= pageCount}"><i class="far fa-chevron-right"></i></li>
    </ul>
  </div>
</div>
<div *ngIf="mappingsPopup" class="mappings-popup">
  <div class="popup-content">
    <clark-browse-by-mappings-component [mappings]="query.standardOutcomes" [dimensions]="{h: 400}" (done)="toggleMappingsPopup()" [inflow]="false"></clark-browse-by-mappings-component>
  </div>
</div>
