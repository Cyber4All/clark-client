<div class="modern-browse-container">
  <!-- Hero Search Section -->
  <div class="search-hero">
    <div class="hero-content">
      <h1 class="hero-title">Discover Cybersecurity Curriculum</h1>
      <p class="hero-subtitle">Explore {{ totalLearningObjects }} high-quality learning objects from leading institutions</p>
      
      <!-- Enhanced Search Bar -->
      <div class="enhanced-search">
        <div class="search-input-wrapper">
          <i class="fas fa-search search-icon"></i>
          <input 
            type="text" 
            placeholder="Search by topic, technology, or keyword..."
            class="search-input"
            [(ngModel)]="searchQuery"
            (input)="onSearchInput($event)"
            (keyup.enter)="performSearch()">
          <button 
            *ngIf="searchQuery" 
            class="clear-search-btn"
            (click)="clearSearchInput()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <button class="search-btn" (click)="performSearch()">
          <i class="fas fa-search"></i>
          Search
        </button>
      </div>
    </div>
  </div>

  <!-- Smart Filters Bar -->
  <div class="smart-filters-bar">
    <div class="filters-content">
      <!-- Quick Filters (Always Visible) -->
      <div class="quick-filters">
        <div class="filter-group">
          <span class="filter-label">Duration:</span>
          <div class="filter-chips">
            <button 
              *ngFor="let length of quickLengthFilters" 
              class="filter-chip"
              [class.active]="isLengthSelected(length.value)"
              (click)="toggleLengthFilter(length.value)">
              <i [class]="length.icon"></i>
              {{ length.name }}
            </button>
          </div>
        </div>

        <div class="filter-group">
          <span class="filter-label">Level:</span>
          <div class="filter-chips">
            <button 
              *ngFor="let level of quickLevelFilters" 
              class="filter-chip"
              [class.active]="isLevelSelected(level.value)"
              (click)="toggleLevelFilter(level.value)">
              {{ level.name }}
            </button>
          </div>
        </div>
      </div>

      <!-- Advanced Filters Toggle -->
      <div class="advanced-filters-toggle">
        <button 
          class="toggle-btn"
          [class.active]="showAdvancedFilters"
          (click)="toggleAdvancedFilters()">
          <i class="fas fa-sliders-h"></i>
          More Filters
          <span class="filter-count" *ngIf="getActiveFiltersCount() > 0">{{ getActiveFiltersCount() }}</span>
        </button>
      </div>
    </div>

    <!-- Advanced Filters Panel -->
    <div class="advanced-filters-panel" [class.open]="showAdvancedFilters">
      <div class="advanced-content">
        <div class="filter-section">
          <h4>Collections</h4>
          <div class="filter-grid scrollable">
            <label *ngFor="let collection of collections" class="filter-checkbox">
              <input
                type="checkbox"
                [value]="collection.value"
                [checked]="isCollectionSelected(collection.value)"
                (change)="toggleCollectionFilter(collection.value)">
              <span class="checkmark"></span>
              {{ collection.name }}
            </label>
          </div>
        </div>

        <div class="filter-section">
          <h4>Topics</h4>
          <div class="filter-grid scrollable">
            <label *ngFor="let topic of topTopics" class="filter-checkbox">
              <input
                type="checkbox"
                [value]="topic.value"
                [checked]="isTopicSelected(topic.value)"
                (change)="toggleTopicFilter(topic.value)">
              <span class="checkmark"></span>
              {{ topic.name }}
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Results Header -->
  <div class="results-header">
    <div class="results-info">
      <h2 class="results-count">
        {{ totalLearningObjects }} Results
        <span *ngIf="hasActiveFilters()" class="filtered-indicator">â€¢ Filtered</span>
      </h2>
      
      <!-- Active Filters Tags -->
      <div class="active-filters" *ngIf="hasActiveFilters()">
        <span class="filter-tag" *ngFor="let filter of getActiveFilterTags()" (click)="removeFilter(filter)">
          {{ filter.label }}
          <i class="fas fa-times"></i>
        </span>
        <button class="clear-all-btn" (click)="clearAllFilters()">
          Clear All
        </button>
      </div>
    </div>

    <div class="results-controls">

      <!-- Sort Dropdown -->
      <div class="sort-dropdown">
        <button class="sort-btn" (click)="toggleSortMenu()">
          <i class="fas fa-sort-amount-down"></i>
          Sort: {{ getSortDisplayName() }}
          <i class="fas fa-chevron-down"></i>
        </button>
        
        <div class="sort-menu" *ngIf="sortMenuOpen">
          <button 
            *ngFor="let option of sortOptions" 
            class="sort-option"
            [class.active]="option.value === currentSort"
            (click)="selectSort(option)">
            <i [class]="option.icon"></i>
            {{ option.label }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-animation">
      <div class="spinner"></div>
      <p>Finding the perfect curriculum for you...</p>
    </div>
  </div>

  <!-- Results Grid/List -->
  <div class="results-container" *ngIf="!loading">
    <!-- No Results State -->
    <div class="no-results" *ngIf="learningObjects.length === 0">
      <div class="no-results-content">
        <i class="fas fa-search"></i>
        <h3>No results found</h3>
        <p>Try adjusting your filters or search terms</p>
        <button class="reset-btn" (click)="resetFilters()">
          <i class="fas fa-refresh"></i>
          Reset Filters
        </button>
      </div>
    </div>

    <!-- Grid View -->
    <div class="results-grid" *ngIf="learningObjects.length > 0">
      <div
        *ngFor="let learningObject of learningObjects; trackBy: trackByIndex"
        class="grid-item"
        (click)="navigateToDetails(learningObject)">
        <clark-modern-learning-card [learningObject]="learningObject"></clark-modern-learning-card>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="modern-pagination" *ngIf="learningObjects.length > 0">
    <div class="pagination-info">
      Showing {{ getStartIndex() }}-{{ getEndIndex() }} of {{ totalLearningObjects }} results
    </div>
    
    <div class="pagination-controls">
      <button 
        class="page-btn"
        [disabled]="query.currPage <= 1"
        (click)="prevPage()">
        <i class="fas fa-chevron-left"></i>
        Previous
      </button>
      
      <div class="page-numbers">
        <button 
          *ngFor="let page of pages" 
          class="page-number"
          [class.active]="page === query.currPage"
          (click)="goToPage(page)">
          {{ page }}
        </button>
      </div>
      
      <button 
        class="page-btn"
        [disabled]="query.currPage >= pageCount"
        (click)="nextPage()">
        Next
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
