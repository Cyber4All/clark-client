<section class='library'>
    <div class='library__splash'>
        <div class='library__splash-container'>
            <h1 class='library__splash-container__title'>
                Your Library
            </h1>
        </div>
    </div>
  
    <div class='library__content-container'>
        <h2 class='library__cards-container__title'>
            Updates Since You've Last Downloaded
        </h2>
        
        <div class='library__cards-container' *ngIf='notificationPageKeys.length'>
            <div class='notifications-container'>
                <div *ngIf='notifications?.length > 5' class='cards-container__arrow-container left'>
                    <i class="fal fa-arrow-circle-left"></i>
                </div>

                <div *ngFor='let notification of notifications' class='cards-container__card'>
                    <clark-notification-card 
                        [notification]='notification'
                        (deleteButtonClicked)='deleteNotification(notification)'
                        (changeLogButtonClicked)='openViewAllChangelogsModal(notification)'>
                    </clark-notification-card>
                </div>
                
                <div *ngIf='notifications?.length > 5' class='cards-container__arrow-container right'>
                    <i class="fal fa-arrow-circle-right"></i>
                </div>
            </div>
        </div>
        
        <div class='library__content-container__saved-items'>
            <h2 class='library-items__title'>
                Saved Items
            </h2>
            <div class='library-items__list-items'>
                <div *ngFor='let item of libraryItems; let i = index'>
                    <clark-library-item
                        [learningObject]='item'
                        [learningObjectAverageRating]='item.avgRating'
                        (downloadButtonClicked)='downloadObject($event, item, i)'
                        (deleteButtonClicked)='removeItem($event, item)'
                        (titleClicked)='goToItem(item)'
                    ></clark-library-item>
                </div>
                <clark-pagination></clark-pagination>
            </div>
        </div>
    </div>
</section>

<clark-popup *ngIf="showDownloadModal" (closed)="toggleDownloadModal(false)">
  <div style="max-width: 600px;" #popupInner>
    <clark-download-notice-popup (close)="toggleDownloadModal(false)"></clark-download-notice-popup>
  </div>
</clark-popup>

<clark-popup [floating]="true" *ngIf="openChangelogModal" (closed)="closeChangelogsModal()">
  <div #popupInner style="min-width: 500px; max-width: 650px;" class="popup-inner">
    <clark-changelog-modal
      [learningObject] = "changelogLearningObject"
      [changelogs] = "changelogs ? changelogs[0] : undefined"
      [loading]="loadingChangelogs"
    ></clark-changelog-modal>
  </div> 
</clark-popup>