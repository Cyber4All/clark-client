<a
  [routerLink]="[
    '/details',
    learningObject.author.username,
    learningObject.cuid,
    learningObject.version,
  ]"
  attr.aria-label="{{ learningObject.name }}, {{ learningObject.length }}, by {{
    learningObject.author.name
  }}, last updated on {{ learningObject.date | date: 'longDate' }}"
>
  <div
    class="learning-object"
    id="learning-object"
    [ngClass]="{ trending: isTrending }"
  >
    <div class="image">
      <img
        *ngIf="imagePath !== 'generic'; else genericLogoTemplate"
        class="logo"
        src="{{ imagePath }}"
        alt="{{
          imagePath !== 'generic' ? topics[0] + ' logo' : 'Generic logo'
        }}"
      />
      <div *ngIf="isDCWFAligned" class="framework-badge dcwf-badge">
        <i class="fas fa-shield-alt"></i>
        DCWF Aligned
      </div>
    </div>
    <div class="learning-object-content">
      <div class="pills">
        <div class="length">
          {{ learningObject.length.toUpperCase() }}
        </div>
        <div *ngIf="learningObject.length === 'nanomodule'" class="time">
          <i class="far fa-clock"></i>
          UP TO ONE HOUR
        </div>
        <div *ngIf="learningObject.length === 'micromodule'" class="time">
          <i class="far fa-clock"></i>
          1 - 4 HOURS
        </div>
        <div *ngIf="learningObject.length === 'module'" class="time">
          <i class="far fa-clock"></i>
          4 - 10 HOURS
        </div>
        <div *ngIf="learningObject.length === 'unit'" class="time">
          <i class="far fa-clock"></i>
          OVER 10 HOURS
        </div>
        <div *ngIf="learningObject.length === 'course'" class="time">
          <i class="far fa-clock"></i>
          15 WEEKS
        </div>
      </div>

      <div class="title">
        {{ truncateText(learningObject.name, 80) }}
        <span
          *ngIf="isTrending"
          class="trending-badge"
          title="Trending"
          [tip]="'This Learning Object is trending'"
          tipPosition="left"
        >
          <i class="fas fa-fire" aria-hidden="true"></i>
        </span>
      </div>

      <div class="date">
        Updated {{ learningObject.date | date: 'mediumDate' }}
      </div>

      <div class="details">
        <div class="author">
          {{ learningObject.contributors[0]?.name | titlecase }}
          {{
            learningObject.contributors?.length - 1
              ? 'and ' + (learningObject.contributors.length - 1) + ' more'
              : ''
          }}
        </div>
        <div class="organization">
          {{ organizationFormat(learningObject.contributors[0]?.organization) }}
        </div>
      </div>

      <div class="rating-stars-container">
        <clark-rating-stars
          *ngIf="averageRating > 0"
          [color]="'gold'"
          [rating]="averageRating"
          [reviewsCount]="reviewsCount"
        ></clark-rating-stars>
        <div
          *ngIf="downloadsCount >= 5"
          class="downloads-indicator"
          tabindex="0"
          attr.aria-label="{{ downloadsCount }} download{{
            downloadsCount !== 1 ? 's' : ''
          }}"
        >
          <i class="far fa-download" aria-hidden="true"></i>
          <span class="downloads-count">{{ downloadsCount | number }}</span>
        </div>
      </div>

      <div *ngIf="tags && tags.length > 0" class="tags-container">
        <span *ngFor="let tagName of tags" class="tag-pill">{{ tagName }}</span>
      </div>
    </div>
  </div>
</a>

<ng-template #genericLogoTemplate>
  <clark-generic-collection-logo></clark-generic-collection-logo>
</ng-template>
