<div *ngIf="learningObject" class="details-wrapper" [ngClass]="learningObject.length">
  <div class="splash">
    <particles [params]="particleParams" [style]="myStyle" [width]="width" [height]="height"></particles>
    <div class="inner">
      <div class="header">
        <div class="name">{{ learningObject.name }}</div>
        <div class="author">Created by
          <span [routerLink]="['/users', learningObject.author.username]" class="link">{{learningObject.author.name}}</span>, updated {{ learningObject.date | date:'shortDate' }}</div>
        <div class="type">{{ learningObject.length }}</div>
      </div>
    </div>
  </div>
  <div class="flex">
    <div class="content">
      <div class="description">
        <div class="title">Description</div>
        <p [innerHtml]="learningObject.goals[0].text"></p>
      </div>
      <cube-outcomes-detail-view [outcomes]="learningObject.outcomes"></cube-outcomes-detail-view>
      <div class="materials">
        <onion-file-details [length]="learningObject.length" [materials]="learningObject.materials"></onion-file-details>
      </div>
    </div>
    <div class="sidebar">
      <div class="inner">
        <div tip="{{ tips.DOWNLOAD_NOW }}" tipLocation="top" tipDisabled="{{canDownload}}" [ngClass]="{'disabled': !auth.user || !canDownload || downloading}"
          class="button good" (click)="addToCart(true)">
          <span *ngIf="canDownload">{{!downloading ? 'Download Now' : 'Downloading'}}
            <span *ngIf="downloading">
              <i class="fal fa-spinner fa-spin"></i>
            </span>
          </span>
          <span *ngIf="!canDownload">Not available for download</span>
        </div>
        <div [ngClass]="{'disabled': !auth.user, 'saved': saved}" class="button neutral on-white" (click)="addToCart()">{{ saved ? 'Saved to your library!' : 'Add to Library' }}</div>
        <ng-container *ngIf="!auth.user">
          <div class="login-msg">Please
            <span [routerLink]="['/auth/login']">log in</span> to add this Learning Object to your library.</div>
        </ng-container>
      </div>
    </div>
  </div>
</div>