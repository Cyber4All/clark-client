<clark-admin-content-wrapper>
    <div page-title>Reviewers</div>
    <clark-admin-search-bar search 
      [placeholder]="searchBarPlaceholder"
      (userInput)="getUsers($event)"
    ></clark-admin-search-bar>
    <div filter-options>
      <div class="btn-group to-right">
        <button class="button good add reviewers" (click)="openSearchModal()"> Add Reviewer
            <i class="far fa-user-plus"></i> 
        </button>
        <clark-popup *ngIf="displaySearchModal" (close)="displaySearchModal = undefined">
            <div #popupInner class="popup-inner">
              <div class="modal-text"><div class="user-dropdown">
                  <input type="text" aria-label="user search" class="user-dropdown__search-input" placeholder="Search for reviewers" [(ngModel)]="query" (input)="userSearchInput$.next($event.currentTarget.value)">
                  <ul *ngIf="showDropdown" class="user-dropdown__list">
                      <ng-container *ngTemplateOutlet="loading ? loadingTemplate : resultsTemplate"></ng-container>
                  </ul>
                </div></div>
              <div class="modal-text"><i class="far fa-users"></i>
                <div>
                </div>Your search results will appear here</div>
            </div>
        </clark-popup>
      </div>
    </div>
  
    <div class="reviewers" main>
      <div *ngIf="!loading; else loadingTemplate">
        <cdk-virtual-scroll-viewport style="height: 700px" itemSize="40" >
          <div *ngIf="users?.length; else emptyTemplate" class="user-cards">
            <div *cdkVirtualFor="let u of users; let i = index" >
              <clark-admin-user-card class="user-cards__card"
                [user]="u"
                (navigateToUserObjects)="navigateToUserObjects($event)"
              ></clark-admin-user-card>
            </div>
          </div>
        </cdk-virtual-scroll-viewport>    
      </div>
    </div>
  
    <ng-template #loadingTemplate>
      <div class="loading-template">
        <i class="far fa-spinner-third fa-spin"></i>
        Loading Reviewers...
      </div>
    </ng-template>
  </clark-admin-content-wrapper>