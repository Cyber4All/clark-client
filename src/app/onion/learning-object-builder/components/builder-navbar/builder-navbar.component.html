<div class="builder-navbar-wrapper">
  <div class="top">
    <a routerLink="onion/dashboard"><i class="far fa-arrow-left"></i> New Learning Object</a>
    <button class="button good" (click)="triggerSubmit()">Submit for Review</button>
  </div>
  <div class="builder-navbar-wrapper__bottom-left-menu">
    <!-- update routerLinkActive with class used to show that link is active -->
    <ul>
      <li>
        <ng-container [ngTemplateOutlet]="navItemTemplate" [ngTemplateOutletContext]="{ disabled: false, link: 'info', text: 'Basic Information' }"></ng-container>
      </li>
      <li>
        <ng-container [ngTemplateOutlet]="navItemTemplate" [ngTemplateOutletContext]="{ disabled: !canRoute('outcomes'), link: 'outcomes', text: 'Learning Outcomes' }"></ng-container>
      </li>
      <li>
        <ng-container [ngTemplateOutlet]="navItemTemplate" [ngTemplateOutletContext]="{ disabled: !canRoute('materials'), link: 'materials', text: 'Materials' }"></ng-container>
      </li>
    </ul>
    <div class="builder-navbar-wrapper__saving-indicator">
      <span *ngIf="isSaving" class="builder-navbar-wrapper__saving-indicator">Saving changes . . . </span>
      <span *ngIf="!isSaving" class="builder-navbar-wrapper__saving-indicator">All changes saved</span>
    </div>
  </div>
</div>

<clark-popup *ngIf="showSubmission" (closed)="showSubmission = false">
  <div #popupInner>
    <clark-collection-selector [currentCollection]="store.learningObjectEvent.getValue().collection" (choice)="submitForReview($event)"></clark-collection-selector>
  </div>
</clark-popup>

<ng-template #navItemTemplate let-link="link" let-disabled="disabled" let-text="text">
  <a *ngIf="!disabled" [ngClass]="{'new': isNewRoute(link)}" routerLink="{{ link }}" routerLinkActive="active" (click)="triggerRouteClick(link)">{{ text }}</a>
  <a *ngIf="disabled" class="disabled" tip="Please give this learning object a name before adding outcomes or uploading materials" tipLocation="above">{{ text }}</a>
</ng-template>