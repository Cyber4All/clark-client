<!-- TODO: 
  * Evaluate all SRP/CCP groupings for components
  * 
-->

<div class="container" [attr.valid]="validate()">
  <div class="toolbar-inner">
    <div class="left"></div>
    <div class="right">
      <div class="ctrl_buttons">
        <div class="button bad icon-only" (click)="deleteOutcome()">
          <i class="far fa-times"></i>
        </div>
      </div>
    </div>
  </div>
  <div class="container-flexer">
    <!-- TODO: .outcome_bloom convert to component due to SRP/CCP -->
    <onion-blooms-selector [default]="outcome._bloom" (bloom)="registerBloomsLevel($event)"></onion-blooms-selector>
    <div class="outcome_input">
      <div class="vert-center">Students will be able to </div>
      <div class="select-wrapper">
        <select style="display: inline" [(ngModel)]="outcome._verb">
          <option *ngFor="let v of classverbs[outcome._bloom]; let i = index" [attr.value]="v" [attr.selected]="i == 0 ? true : null">{{ v }}</option>
        </select>
      </div>
      <!-- TODO: .outcome-input should grow to fill flex row of .outcome_input && rename classes -->
      <input class="outcome-input" type="text" placeholder="Outcome Text" #outcomeValidate="ngModel" (focus)="updateFocus(i);"
        [(ngModel)]="outcome._text" [ngClass]="{'bad': false && submitted && !outcomeValidate.valid}" required />
    </div>
  </div>
  <div class="mappings-toolbar">
    <!-- TODO: pass tab components into slots of a tab container component -->
    <div class="tab" [ngClass]="{ 'active': activeTab === tabs.MAPPINGS }" (click)="switchTab(tabs.MAPPINGS)">Mapped Outcomes</div>
    <div class="tab" [ngClass]="{ 'active': activeTab === tabs.SUGGESTIONS }" (click)="switchTab(tabs.SUGGESTIONS, i)">Suggest Outcomes</div>
    <div class="tab" [ngClass]="{ 'active': activeTab === tabs.SEARCH }" (click)="switchTab(tabs.SEARCH, i)">Search for Outcomes</div>
  </div>
  <onion-mappings-list *ngIf="activeTab === tabs.MAPPINGS" (delete)="removeStandardByID($event, m)"></onion-mappings-list>

  <onion-suggestion-component [outcome]="outcome._text" [opened]="(activeTab === tabs.SUGGESTIONS) && (suggestIndex==i)" [mappingsInput]="outcome._mappings"></onion-suggestion-component>

  <clark-browse-by-mappings-component [open]="openSearch" (mappings)="addMappings($event)" (closed)="modalService.closeAll()"></clark-browse-by-mappings-component>
</div>