<div class="topbar"></div>
<div class="side-panel">
  <ng-container *ngIf="!loadingObject && releasedLearningObject; else loadingObjectTemplate">
    <div class="side-panel__object">
      <div class="side-panel-object__details">
        <clark-panel-learning-object
          [learningObject]="releasedLearningObject"
        ></clark-panel-learning-object>
        <div class="side-panel__button-bar">
          <button
            class="button good"
            (activate)="close()"
            [routerLink]="[
              '/details',
              learningObject.author.username,
              learningObject.name
            ]"
            attr.aria-label="Visit {{ learningObject.name }}'s public listing"
          >
            Visit <i class="far fa-external-link"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="side-panel__metrics">
      <clark-metrics [learningObject]="releasedLearningObject"></clark-metrics>
    </div>
    <div *ngIf="!loadingRevision" class="side-panel__revision">
      <clark-revision [hasRevision]="hasRevision" [revision]="revisionLearningObject" (createRevision)="createRevision.emit(learningObject)"></clark-revision>
    </div>
  </ng-container>
</div>

<ng-template #loadingObjectTemplate>
  <div class="side-panel__loading">
    <i class="far fa-spinner-third fa-spin"></i> Loading "{{ learningObject.name }}"
  </div>
</ng-template>