<div class="dashboard" [ngClass]="{'disabled': disabled}">
  <div class="splash">
    <div class="inner">
      <div class="greeting">Good {{ greetingTime }}, <span>{{ auth.user.name.split(' ')[0] }}</span>!</div>
    </div>
  </div>
  <div class="list">
    <div class="list-top">
      <header class="header">Your Learning Objects</header>
      <div class="btn-group to-right">
        <button routerLink="/onion/learning-object-builder" class="button good">New <i class="fas fa-plus"></i></button>
        <button class="button neutral">Filter <i class="fas fa-sort"></i></button>
      </div>
    </div>
    <div *ngIf="!loading; else loadingTemplate" class="list-body">
      <div class="column-headers">
        <div>
          <clark-checkbox [setValue]="allSelected && selected.size === learningObjects.length" (action)="selectAll()"></clark-checkbox>
        </div>
        <div>Status</div>
        <div>Name</div>
        <div>Type</div>
        <div>Date</div>
        <div><!-- meatball --></div>
      </div>
      <clark-dashboard-item *ngFor="let l of learningObjects; let i = index" [learningObject]="l" [selected]="this.selected.get(l.id) !== undefined" (select)="toggleSelect(l, $event, i)" (delete)="deleteConfirmation = delete(l); deleteConfirmation.next()"></clark-dashboard-item>
    </div>
  </div>
</div>

<ng-template #loadingTemplate>
  <span class="loading-template">
    <i class="far fa-spinner-third fa-spin"></i>
    Loading learning objects...
  </span>
</ng-template>

<clark-popup *ngIf="deleteConfirmation" (closed)="deleteConfirmation = undefined">
  <div #popupInner class="popup-inner">
    <div class="modal-title">Are you sure?</div>
    <div class="modal-text">You cannot undo this action!</div>
    <div class="btn-group center">
      <button class="button bad" (click)="deleteConfirmation?.next(true)">Yep, do it! <i class="far fa-trash"></i></button>
      <button class="button neutral" (click)="deleteConfirmation = undefined">Wait, nevermind! <i class="far fa-ban"></i></button>
    </div>
  </div>
</clark-popup>

