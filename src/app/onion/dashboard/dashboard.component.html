<div class="top">
  <div class="title vert-center">
    Dashboard
  </div>
  <div class="actions btn-group to-right">
    <div [@buttonEnter] class="filter button bad" *ngIf="showCancel" (click)="cancelAction()">Cancel
      <i class="far fa-ban"></i>
    </div>
    <div [@buttonEnter] *ngIf="!showCancel" class="add button good" (click)="newLearningObject()">New
      <i class="far fa-plus"></i>
    </div>
    <div [@buttonEnter] class="filter button neutral" *ngIf="selected.length && !freezeSelected" (click)="startAddChildren()">Add selected to
      <i class="far fa-project-diagram"></i>
    </div>
    <div [@buttonEnter] class="filter button bad" *ngIf="selected.length && !freezeSelected" (click)="delete(true)">Delete Selected
      <i class="fa fa-times"></i>
    </div>
  </div>
</div>
<ng-container *ngIf="!loading; else loadingTemplate">
  <ng-container *ngIf="learningObjects && learningObjects.length; else noObjects">
      <div class="faux-table">
        <div class="row columns">
          <div class="select">
            <clark-checkbox [setValue]="allSelected && selected.length === learningObjects.length" [disabled]="freezeSelected" (click)="selectAll()"></clark-checkbox>
          </div>
          <div class="cells">
            <div class="cell">Name</div>
            <div class="cell">Type</div>
            <div class="cell">Last Updated</div>
          </div>
          <div class="options placeholder">
            <!-- this is a placeholder and should remain empty -->
          </div>
        </div>
        <div class="rows" *ngFor="let l of learningObjects" [hidden]="hidden.get(l.name)">
          <div [ngClass]="{published: l.published, unpublished: !l.published && !l.lock, locked: l.lock, 'disabled': freezeSelected && selected.includes(l.name), 'child': selectingParent && selected.includes(l.name), 'clickable': allowRowClick}" class="row" (click)="allowRowClick ? rowClick() : undefined">
            <clark-checkbox [setValue]="allSelected || objectIsSelected(l.name)" [disabled]="freezeSelected" (checkboxChecked)="selectLearningObject(l)" (checkboxUnchecked)="deselectLearningObject(l)"></clark-checkbox>
            <div class="cells">
              <div class="cell">
                <a *ngIf="!allowRowClick" [routerLink]="['/onion/learning-object-builder', l.name]" class="builder-link">{{l.name}}</a>
                <a *ngIf="allowRowClick" class="builder-link">{{l.name}}</a>
              </div>
              <div class="cell">{{l.length | titlecase}}</div>
              <div class="cell">{{l.date | date:'medium'}}</div>
            </div>
            <div class="options" (click)="makeContextMenu($event, l)" [attr.type]="l.length" *ngIf="!freezeSelected">
              <div class="circle"></div>
              <div class="circle"></div>
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
  </ng-container>
</ng-container>
<ng-template #loadingTemplate>
  <div class="dashboard-loading">
      <i class="far fa-spinner-t
      rd fa-spin"></i>
  </div>
</ng-template>
<ng-template #noObjects>
  <div class="banner no-lo">
    <div class="text">You don't have any Learning Objects yet!</div>
    <div tip="{{ tips.LEARNING_OBJECT }}" tipDelay="500" tipLocation="bottom" (click)="newLearningObject()" class="button neutral bright">Create a Learning Object</div>
  </div>
</ng-template>
